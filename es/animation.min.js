const t="undefined"==typeof window?global:window,e=["moz","webkit"];let i=t.requestAnimationFrame,s=t.cancelAnimationFrame||t.cancelRequestAnimationFrame;if(!i||!s)for(var a=0;2>a;a++)i=t[e[a]+"RequestAnimationFrame"],s=t[e[a]+"CancelAnimationFrame"]||t[e[a]+"CancelRequestAnimationFrame"];i&&s||(i=function(){let t=0;return function(e){const i=Date.now(),s=Math.max(0,16-(i-t));return t=i+s,window.setTimeout(e,s)}}(),s=function(t){return window.clearTimeout(t)});const n=i,h=s,d=(t,e)=>e>0?+setTimeout(t,e):(t(Math.abs(e)),0);class l{constructor({duration:t,easing:e,delay:i}={}){this._delay=0,this._frameId=0,this._elapsed=0,this._sleepId=0,this._delayId=0,this._tick=null,this._delayFn=null,this.duration="number"==typeof t&&t>0?t:0,this.easing="function"!=typeof e?t=>t:e,this.delay="number"!=typeof i?0:i}start(t){if(!this._tick&&!this._delayFn){const{duration:e,easing:i,delay:s}=this;this._delayFn=s=>{if(this._delayId=0,this._delayFn=null,this._delay=0,e>0){const a=s=>{const h=Date.now();this._elapsed+=h-s,e>this._elapsed?(this._frameId=n((()=>a(h))),t(i(this._elapsed/e))):(this._tick=null,this._frameId=0,this._elapsed=0,t(1))};this._tick=a,this._elapsed=s||0,a(Date.now())}else t(1)},this._delay=Date.now(),this._delayId=d(this._delayFn,s)}}restart(){if((this._tick||this._delayFn)&&(this.stop(),this._tick&&this._tick(Date.now()),this._delayFn)){const t=this.delay+this._delay;this._delay+=Date.now(),this._delayId=d(this._delayFn,t)}}sleep(t){t&&t>0&&(this._tick||this._delayFn)&&(this.stop(),this._sleepId=+setTimeout((()=>{this._sleepId=0,this.restart()}),t))}stop(){(this._tick||this._delayFn)&&(this._delayId&&(clearTimeout(this._delayId),this._delayId=0,this._delay-=Date.now()),this._frameId&&(h(this._frameId),this._frameId=0),this._sleepId&&(clearTimeout(this._sleepId),this._sleepId=0))}end(){(this._tick||this._delayFn)&&(this.stop(),this._tick&&this._tick(Date.now()+this._elapsed-this.duration),this._delayFn&&this._delayFn(this.duration))}}export{l as Animation,h as cancelAnimationFrame,n as requestAnimationFrame};
//# sourceMappingURL=animation.min.js.map
